id: es.gob.firmaelectronica.Autofirma
runtime: org.freedesktop.Platform
sdk: org.freedesktop.Sdk
runtime-version: "23.08"
rename-icon: afirma
rename-desktop-file: afirma.desktop
sdk-extensions:
    - org.freedesktop.Sdk.Extension.openjdk11
command: autofirma
finish-args:
    - --env=GTK_THEME=Adwaita:light
    - --env=PATH=/app/jre/bin:/app/bin:/usr/bin
    - --share=ipc
    - --socket=x11
    - --socket=pulseaudio
    - --share=network
    - --device=dri
    - --filesystem=home
    - --persist=.java
    - --persist=.afirma
modules:
    - name: openjdk
      buildsystem: simple
      build-commands:
        - /usr/lib/sdk/openjdk11/install.sh

    - name: dnie
      buildsystem: simple
      build-commands:
        - sh install-dnie.sh
      sources:
        - type: file
          dest-filename: libpkcs11-dnie_1.6.8_amd64.deb
          url: https://www.dnielectronico.es/descargas/distribuciones_linux/libpkcs11-dnie_1.6.8_amd64.deb
          sha256: 851d7438b2c0ca601e492e69b2bbd279c0ea291aa8881d932b8e0a56f6261b09
        
        - type: file
          path: install-dnie.sh
        
    - name: autofirma
      buildsystem: simple
      build-commands:
        - ./install-autofirma.sh
      sources:
        - type: archive
          dest-filename: AutoFirma_Linux_Debian.zip
          url: https://estaticos.redsara.es/comunes/autofirma/1/8/2/AutoFirma_Linux_Debian.zip
          sha256: 5b0660a9e1fbcba6aa81c8142429084e72f9d2b306c6bc1c73b7c860e6c81ab9
        - type: file
          path: install-autofirma.sh
        - type: file
          path: afirma.desktop
        - type: file
          path: AutoFirma.svg
